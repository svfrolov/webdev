{% extends 'services/base.html' %}
{% block title %}{{ real_estate.name }}{% endblock %}
{% block header %}
<div class="page-header">
  <div class="container">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a
            href="{% url 'services:real-estate-list-page' %}"
            class="text-decoration-none"
            >Каталог недвижимости</a
          >
        </li>
        <li class="breadcrumb-item active" aria-current="page">
          {{ real_estate.name }}
        </li>
      </ol>
    </nav>
  </div>
</div>
{% endblock %}
{% block content %}
<div class="row">
  <div class="col-md-8">
    <div class="card mb-4">
      {% if real_estate.image_url %}
      <img
        src="{{ real_estate.image_url }}"
        class="img-fluid"
        alt="{{ real_estate.name }}"
        style="max-height: 500px; width: 100%; object-fit: cover"
      />
      {% else %}
      <img
        src="https://via.placeholder.com/800x500?text=Нет+изображения"
        class="img-fluid"
        alt="Нет изображения"
      />
      {% endif %}
      <div class="card-body">
        <span class="badge badge-property-type mb-2"
          >{{ real_estate.get_property_type_display }}</span
        >
        <h1 class="mb-2">{{ real_estate.name }}</h1>
        <p class="property-address mb-4">{{ real_estate.address }}</p>

        <div class="row mb-4">
          <div class="col-md-3 col-6 mb-3">
            <div class="d-flex align-items-center">
              <i class="bi bi-house-door fs-4 me-2 text-primary"></i>
              <div>
                <small class="text-muted d-block">Площадь</small>
                <div class="fw-bold">{{ real_estate.area }} м²</div>
              </div>
            </div>
          </div>
          <div class="col-md-3 col-6 mb-3">
            <div class="d-flex align-items-center">
              <i class="bi bi-door-open fs-4 me-2 text-primary"></i>
              <div>
                <small class="text-muted d-block">Комнат</small>
                <div class="fw-bold">{{ real_estate.rooms }}</div>
              </div>
            </div>
          </div>
          {% if real_estate.floor %}
          <div class="col-md-3 col-6 mb-3">
            <div class="d-flex align-items-center">
              <i class="bi bi-layers fs-4 me-2 text-primary"></i>
              <div>
                <small class="text-muted d-block">Этаж</small>
                <div class="fw-bold">
                  {{ real_estate.floor }}/{{ real_estate.total_floors }}
                </div>
              </div>
            </div>
          </div>
          {% endif %}
          <div class="col-md-3 col-6 mb-3">
            <div class="d-flex align-items-center">
              <i class="bi bi-building fs-4 me-2 text-primary"></i>
              <div>
                <small class="text-muted d-block">Тип</small>
                <div class="fw-bold">
                  {{ real_estate.get_property_type_display }}
                </div>
              </div>
            </div>
          </div>
        </div>

        <h2 class="property-price mb-4">
          {{ real_estate.price|floatformat:0 }} ₽
        </h2>

        <div class="card mb-4">
          <div class="card-header bg-light">
            <h5 class="mb-0">Описание</h5>
          </div>
          <div class="card-body">
            <p class="card-text">{{ real_estate.description|linebreaks }}</p>
          </div>
        </div>

        <div class="card mb-4">
          <div class="card-header bg-light">
            <h5 class="mb-0">Расположение</h5>
          </div>
          <div class="card-body">
            <p class="mb-0">
              <i class="bi bi-geo-alt me-2 text-primary"></i> {{
              real_estate.address }}
            </p>
          </div>
        </div>

        {% if user.is_authenticated %}
        <form
          method="post"
          action="{% url 'services:add-property-to-order' real_estate.id %}"
          class="mt-4"
        >
          {% csrf_token %}
          <button type="submit" class="btn btn-primary btn-lg w-100">
            <i class="bi bi-cart-plus"></i> Добавить в корзину
          </button>
        </form>
        {% endif %}
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <div class="card mb-4 sticky-top" style="top: 20px; z-index: 1">
      <div class="card-header bg-light">
        <h5 class="mb-0">Связаться с нами</h5>
      </div>
      <div class="card-body">
        <p>
          <i class="bi bi-telephone me-2 text-primary"></i> +7 (999) 123-45-67
        </p>
        <p>
          <i class="bi bi-envelope me-2 text-primary"></i> info@realestate.ru
        </p>
        <p>
          <i class="bi bi-geo-alt me-2 text-primary"></i> г. Москва, ул.
          Примерная, д. 1
        </p>
        <hr />
        <p class="text-muted">
          Оставьте заявку, и наш менеджер свяжется с вами в ближайшее время
        </p>
        <div class="mb-3">
          <input
            type="text"
            class="form-control"
            placeholder="Ваше имя"
            disabled
          />
        </div>
        <div class="mb-3">
          <input
            type="tel"
            class="form-control"
            placeholder="Телефон"
            disabled
          />
        </div>
        <button class="btn btn-primary w-100" disabled>Оставить заявку</button>
      </div>
    </div>
  </div>
</div>

<div class="mt-5">
  <h3 class="mb-4">Похожие объекты</h3>
  <div class="row row-cols-1 row-cols-md-3 g-4">
    <!-- Здесь будут похожие объекты -->
    <div class="col">
      <div class="card h-100">
        <div class="card-body text-center py-5">
          <i class="bi bi-house text-muted" style="font-size: 2rem"></i>
          <p class="mt-3 text-muted">Функция будет доступна позже</p>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}